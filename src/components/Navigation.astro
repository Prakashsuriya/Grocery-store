---
const navigationItems = [
  { label: "Home", href: "/" },
  { label: "Gallery", href: "/gallery" },
  { label: "About", href: "/about" },
  { label: "Contact", href: "/contact" },
  { label: "Store Info", href: "/store-info" },
];
---

<nav
  id="navbar"
  class="fixed top-4 left-1/2 transform -translate-x-1/2 z-50 transition-all duration-300 ease-in-out backdrop-blur-sm bg-white/70 shadow-lg rounded-[2rem] border border-white/30"
>
  <div class="px-6 py-3">
    <!-- Desktop Navigation -->
    <div class="hidden lg:flex items-center space-x-8">
      <!-- Logo -->
      <a
        href="/"
        class="flex items-center space-x-3 text-xl font-bold text-primary hover:text-primary/80 transition-colors"
      >
        <img 
          src="https://cdn.builder.io/api/v1/image/assets%2F8f78a356a05540998176ea24bafbe59e%2Fc93154d951494f618adbb017db30f7ce?format=webp&width=800"
          alt="Banyan Grocers Logo"
          class="w-8 h-8 rounded-full object-cover"
        />
        <span class="hidden xl:block bg-gradient-to-r from-fresh-600 to-fresh-700 bg-clip-text text-transparent">
          Banyan Grocers
        </span>
      </a>

      <!-- Navigation Links -->
      <div class="flex items-center space-x-6">
        {navigationItems.map((item) => (
          <a
            href={item.href}
            class="text-sm font-medium transition-all duration-200 hover:text-primary relative text-muted-foreground hover:text-foreground"
            data-nav-link
          >
            {item.label}
          </a>
        ))}
      </div>

      <!-- Action Buttons -->
      <div class="flex items-center space-x-3">
        <button
          onclick="window.location.href='tel:+16072387307'"
          class="flex items-center gap-2 bg-white/50 hover:bg-secondary/20 border border-secondary/30 text-secondary hover:text-secondary-foreground transition-all duration-200 px-3 py-2 rounded-lg text-sm font-medium"
        >
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z"></path>
          </svg>
          Call Now
        </button>
        <a href="/shopping">
          <button class="flex items-center gap-2 bg-gradient-to-r from-primary to-fresh-600 hover:from-fresh-600 hover:to-primary text-white shadow-md hover:shadow-lg transition-all duration-200 px-3 py-2 rounded-lg text-sm font-medium">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z"></path>
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 6h18"></path>
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 10a4 4 0 01-8 0"></path>
            </svg>
            Shop
          </button>
        </a>
      </div>
    </div>

    <!-- Mobile Navigation -->
    <div class="flex lg:hidden items-center justify-between w-full">
      <!-- Mobile Logo -->
      <a
        href="/"
        class="flex items-center space-x-2 text-lg font-bold text-primary"
      >
        <img 
          src="https://cdn.builder.io/api/v1/image/assets%2F8f78a356a05540998176ea24bafbe59e%2Fc93154d951494f618adbb017db30f7ce?format=webp&width=800"
          alt="Banyan Grocers Logo"
          class="w-7 h-7 rounded-full object-cover"
        />
        <span class="bg-gradient-to-r from-fresh-600 to-fresh-700 bg-clip-text text-transparent">
          Banyan
        </span>
      </a>

      <!-- Mobile Menu Button -->
      <button
        id="mobile-menu-button"
        class="p-2 hover:bg-gray-100 rounded-lg"
      >
        <svg id="menu-icon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
        <svg id="close-icon" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
    </div>
  </div>

  <!-- Mobile Menu Dropdown -->
  <div id="mobile-menu" class="lg:hidden absolute top-full left-0 right-0 mt-2 bg-white/95 backdrop-blur-md rounded-2xl shadow-xl border border-white/30 p-4 hidden">
    <div class="flex flex-col space-y-3">
      {navigationItems.map((item) => (
        <a
          href={item.href}
          class="text-sm font-medium py-2 px-3 rounded-lg transition-all duration-200 text-muted-foreground hover:text-foreground hover:bg-muted/50"
        >
          {item.label}
        </a>
      ))}
      <div class="flex flex-col space-y-2 pt-3 border-t border-border/50">
        <button
          onclick="window.location.href='tel:+16072387307'"
          class="flex items-center gap-2 bg-white/50 hover:bg-secondary/20 border border-secondary/30 text-secondary justify-start px-3 py-2 rounded-lg text-sm font-medium"
        >
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z"></path>
          </svg>
          Call +1 607-238-7307
        </button>
        <a href="/shopping">
          <button class="w-full flex items-center gap-2 bg-gradient-to-r from-primary to-fresh-600 hover:from-fresh-600 hover:to-primary text-white px-3 py-2 rounded-lg text-sm font-medium">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z"></path>
            </svg>
            Shop Now
          </button>
        </a>
      </div>
    </div>
  </div>
</nav>

<script>
  // Navigation scroll effect
  function handleScroll() {
    const navbar = document.getElementById('navbar');
    if (navbar) {
      if (window.scrollY > 20) {
        navbar.classList.add('backdrop-blur-md', 'bg-white/80', 'shadow-xl');
        navbar.classList.remove('backdrop-blur-sm', 'bg-white/70', 'shadow-lg');
      } else {
        navbar.classList.add('backdrop-blur-sm', 'bg-white/70', 'shadow-lg');
        navbar.classList.remove('backdrop-blur-md', 'bg-white/80', 'shadow-xl');
      }
    }
  }

  // Mobile menu toggle
  function setupMobileMenu() {
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    const menuIcon = document.getElementById('menu-icon');
    const closeIcon = document.getElementById('close-icon');

    if (mobileMenuButton && mobileMenu && menuIcon && closeIcon) {
      mobileMenuButton.addEventListener('click', () => {
        const isOpen = !mobileMenu.classList.contains('hidden');
        
        if (isOpen) {
          mobileMenu.classList.add('hidden');
          menuIcon.classList.remove('hidden');
          closeIcon.classList.add('hidden');
        } else {
          mobileMenu.classList.remove('hidden');
          menuIcon.classList.add('hidden');
          closeIcon.classList.remove('hidden');
        }
      });
    }
  }

  // Active navigation link highlighting
  function highlightActiveLink() {
    const currentPath = window.location.pathname;
    const navLinks = document.querySelectorAll('[data-nav-link]');
    
    navLinks.forEach(link => {
      const href = link.getAttribute('href');
      if (href === currentPath) {
        link.classList.add('text-primary');
        link.classList.remove('text-muted-foreground');
        
        // Add active indicator dot
        if (!link.querySelector('.active-dot')) {
          const dot = document.createElement('div');
          dot.className = 'absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-primary rounded-full active-dot';
          link.style.position = 'relative';
          link.appendChild(dot);
        }
      }
    });
  }

  // Initialize everything when DOM is loaded
  document.addEventListener('DOMContentLoaded', () => {
    window.addEventListener('scroll', handleScroll);
    setupMobileMenu();
    highlightActiveLink();
  });
</script>
